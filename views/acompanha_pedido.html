<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/acompanha_pedido.css">
    <link rel="stylesheet" href="css/menu_horizontal.css">
    <link rel="stylesheet" href="fontawesome-free-5.15.1-web/css/fontawesome.min.css">
    <script src="fontawesome-free-5.15.1-web/js/all.min.js"></script>
    <script src="javascript/controlador.js"></script>
    <script src="javascript/usuario.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <title>Acompanha_Pedido</title>
    <script>
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        async function progress() {
            document.getElementById("botao-prox").style.display = 'none';
            for (let i = 1; i <= 100; i++) {                
                document.getElementById('progress').value += 1;
                document.getElementById('porcento').innerHTML = 'Progresso: ' + i + '%';
                if (document.getElementById('progress').value == 25) {
                    document.getElementById('mensagem-entrega').innerHTML = 'O entregador chegou ao local de retirada!';                    
                } else if (document.getElementById('progress').value == 50) {
                    document.getElementById('mensagem-entrega').innerHTML = 'O entregador está retirando sua comida!';
                } else if (document.getElementById('progress').value == 75) {
                    document.getElementById('mensagem-entrega').innerHTML = 'O entregador está na metade do caminho até sua sala de aula!';
                } else if (document.getElementById('progress').value == 100) {
                    document.getElementById("botao-prox").style.display = 'block';
                    document.getElementById('mensagem-entrega').innerHTML = 'O entregador chegou até sua sala, bom apetite!';
                }                
                await sleep(75);
            }
        }        
    </script>
</head>

<body style='text-align: -webkit-center; background-color: whitesmoke;'>
    <div class="menu_horizontal">
        <div class="container-fluid">
            <div class="row">
                <div class="col-4 float-left" style="text-align: start;">
                    <img id="logo-login" src="image/logoUam.JPG" onclick="window.location='tela_principal.html'">
                </div>
                <div class="col-4" style="text-align: center;">
                    <i class="fas fa-search" id="icone-busca"></i>
                    <input type="text" placeholder="Buscar pratos e restaurantes" class="input-busca">
                </div>
                <div class="col-4" style="text-align: end;">
                    <i class="fas fa-sign-out-alt" id='icone-log-out' onclick='logout()'></i>
                    <i class="fas fa-shopping-cart" id='icone-carrinho' onclick="window.location='carrinho.html'"></i>
                    <i class="fas fa-star" id='icone-estrela'></i>
                    <i class="fas fa-user-alt" id='icone-user' onclick="window.location='mostra_dados.html'"></i>
                </div>
            </div>
        </div>
    </div>
    <div class='titulo'>
        <label id="label-progress-bar" for="progress-bar">Seu pedido está a caminho!</label>
    </div>

    <div>
        <p id="porcento" value="0">Progresso: 0%</p>
    </div>
    
    <div class="acompanha-pedido">
        <progress id="progress" value="0" min="0" max="100"></progress>
        <p id="mensagem-entrega">O entregador está se dirigindo ao local de entrega!</p>
    </div>
    <div class="prox">
        <button id="botao-prox" onclick="window.location='avalia_pedido.html'">Próximo</button>
    </div>
    <script>progress();</script>
</body>

</html>